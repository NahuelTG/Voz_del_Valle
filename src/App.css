* {
   margin: 0;
   padding: 0;
   box-sizing: border-box;
}

:root {
   --primary-green: #2ecc71;
   --secondary-blue: #1b4f72;
   --accent-yellow: #f1c40f;
   --light-gray: #ecf0f1;
   --white: #ffffff;
   --dark-bg: #1a1a1a;
   --dark-surface: #2d2d2d;
   --dark-text: #e0e0e0;
   --shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
   --shadow-dark: 0 4px 12px rgba(0, 0, 0, 0.3);
}

body {
   font-family: "Poppins", -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
   background-color: var(--light-gray);
   overflow-x: hidden;
}

.app {
   position: relative;
   width: 100vw;
   height: 100vh;
   overflow: hidden;
   transition: all 0.3s ease;
}

.app.dark-mode {
   --light-gray: var(--dark-bg);
   --white: var(--dark-surface);
   color: var(--dark-text);
}

.app.dark-mode .map-view {
   background: linear-gradient(135deg, #1b4f72 0%, #0f2027 100%);
}

/* Map View */
.map-view {
   width: 100%;
   height: 100%;
   background: linear-gradient(135deg, #2ecc71 0%, #1b4f72 100%);
   position: relative;
}

.map-placeholder {
   width: 100%;
   height: 100%;
   position: relative;
   background-image: radial-gradient(circle at 25% 25%, rgba(255, 255, 255, 0.1) 2px, transparent 2px),
      radial-gradient(circle at 75% 75%, rgba(255, 255, 255, 0.1) 2px, transparent 2px);
   background-size: 50px 50px;
}

.map-marker {
   position: absolute;
   top: 50%;
   left: 50%;
   transform: translate(-50%, -50%);
   width: 20px;
   height: 20px;
   background: var(--accent-yellow);
   border-radius: 50%;
   box-shadow: 0 0 20px rgba(241, 196, 15, 0.6);
}

.marker-pulse {
   position: absolute;
   top: -10px;
   left: -10px;
   width: 40px;
   height: 40px;
   border: 2px solid var(--accent-yellow);
   border-radius: 50%;
   animation: pulse 2s infinite;
}

.route-marker {
   position: absolute;
   display: flex;
   flex-direction: column;
   align-items: center;
   cursor: pointer;
   transition: transform 0.2s ease;
}

.route-marker:hover {
   transform: scale(1.1);
}

.marker-icon {
   width: 40px;
   height: 40px;
   border-radius: 50%;
   display: flex;
   align-items: center;
   justify-content: center;
   font-size: 1.2rem;
   margin-bottom: 4px;
   box-shadow: var(--shadow);
}

.marker-icon.unlocked {
   background: var(--primary-green);
   color: white;
}

.marker-icon.locked {
   background: #95a5a6;
   color: white;
}

.marker-label {
   background: rgba(255, 255, 255, 0.9);
   padding: 4px 8px;
   border-radius: 12px;
   font-size: 0.7rem;
   font-weight: 500;
   color: var(--secondary-blue);
   white-space: nowrap;
}

@keyframes pulse {
   0% {
      transform: scale(0.8);
      opacity: 1;
   }
   100% {
      transform: scale(2);
      opacity: 0;
   }
}

/* Menu Button */
.menu-button {
   position: fixed;
   top: 20px;
   left: 20px;
   z-index: 1000;
   width: 50px;
   height: 50px;
   background: rgba(255, 255, 255, 0.9);
   border: none;
   border-radius: 12px;
   cursor: pointer;
   display: flex;
   flex-direction: column;
   justify-content: center;
   align-items: center;
   gap: 4px;
   transition: all 0.3s ease;
   box-shadow: var(--shadow);
}

.app.dark-mode .menu-button {
   background: rgba(45, 45, 45, 0.9);
}

.menu-button:hover {
   background: white;
   transform: scale(1.05);
}

.hamburger-line {
   width: 20px;
   height: 2px;
   background: var(--secondary-blue);
   transition: all 0.3s ease;
   border-radius: 1px;
}

.app.dark-mode .hamburger-line {
   background: var(--dark-text);
}

.menu-button.open .hamburger-line:nth-child(1) {
   transform: rotate(45deg) translate(5px, 5px);
}

.menu-button.open .hamburger-line:nth-child(2) {
   opacity: 0;
}

.menu-button.open .hamburger-line:nth-child(3) {
   transform: rotate(-45deg) translate(7px, -6px);
}

/* Bottom Navigation */
.bottom-navigation {
   position: fixed;
   bottom: 0;
   left: 0;
   right: 0;
   background: var(--white);
   border-top: 1px solid #e0e0e0;
   display: flex;
   justify-content: space-around;
   padding: 8px 0 calc(8px + env(safe-area-inset-bottom));
   z-index: 100;
   box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
}

.app.dark-mode .bottom-navigation {
   background: var(--dark-surface);
   border-top-color: #404040;
}

.bottom-navigation .nav-item {
   display: flex;
   flex-direction: column;
   align-items: center;
   padding: 8px 12px;
   border: none;
   background: none;
   cursor: pointer;
   transition: all 0.2s ease;
   border-radius: 8px;
   min-width: 60px;
}

.bottom-navigation .nav-item:hover {
   background: var(--light-gray);
}

.bottom-navigation .nav-item.active {
   color: var(--primary-green);
}

.bottom-navigation .nav-icon {
   font-size: 1.5rem;
   margin-bottom: 2px;
}

.bottom-navigation .nav-label {
   font-size: 0.7rem;
   font-weight: 500;
}

/* Enhanced Route Slider */
.enhanced-route-slider {
   position: fixed;
   bottom: -100%;
   left: 0;
   right: 0;
   background: var(--white);
   border-radius: 20px 20px 0 0;
   box-shadow: var(--shadow);
   z-index: 200;
   transition: bottom 0.3s ease;
   max-height: 70vh;
   display: flex;
   flex-direction: column;
}

.enhanced-route-slider.visible {
   bottom: 60px; /* Altura de la bottom navigation */
}

.slider-handle {
   width: 40px;
   height: 4px;
   background: var(--light-gray);
   border-radius: 2px;
   margin: 12px auto 0;
}

.slider-header {
   display: flex;
   align-items: center;
   justify-content: space-between;
   padding: 16px 20px 0;
}

.tab-navigation {
   display: flex;
   gap: 4px;
}

.tab-button {
   padding: 8px 16px;
   border: none;
   background: none;
   border-radius: 20px;
   font-weight: 500;
   font-size: 0.9rem;
   cursor: pointer;
   transition: all 0.2s ease;
   color: #666;
}

.tab-button.active {
   background: var(--primary-green);
   color: white;
}

.slider-close {
   background: none;
   border: none;
   font-size: 1.2rem;
   color: #666;
   cursor: pointer;
   padding: 8px;
   border-radius: 50%;
   transition: background 0.2s ease;
}

.slider-close:hover {
   background: var(--light-gray);
}

.slider-content {
   flex: 1;
   overflow-y: auto;
   padding: 20px;
}

.tab-content {
   animation: fadeIn 0.3s ease;
}

@keyframes fadeIn {
   from {
      opacity: 0;
      transform: translateY(10px);
   }
   to {
      opacity: 1;
      transform: translateY(0);
   }
}

/* Tab Content Styles */
.route-header {
   margin-bottom: 16px;
}

.route-title {
   color: var(--secondary-blue);
   font-size: 1.4rem;
   font-weight: 600;
   margin-bottom: 8px;
}

.route-badges {
   display: flex;
   gap: 8px;
   flex-wrap: wrap;
}

.badge {
   padding: 4px 8px;
   border-radius: 12px;
   font-size: 0.75rem;
   font-weight: 500;
}

.badge.difficulty {
   background: var(--accent-yellow);
   color: var(--secondary-blue);
}

.badge.duration,
.badge.distance {
   background: var(--light-gray);
   color: #666;
}

.route-description {
   color: #666;
   line-height: 1.6;
   margin-bottom: 20px;
   font-size: 0.95rem;
}

.route-actions {
   display: flex;
   gap: 12px;
   flex-wrap: wrap;
}

.route-button {
   display: flex;
   align-items: center;
   justify-content: center;
   gap: 8px;
   padding: 12px 20px;
   border: none;
   border-radius: 8px;
   font-weight: 600;
   font-size: 0.95rem;
   cursor: pointer;
   transition: all 0.2s ease;
   flex: 1;
   min-width: 140px;
}

.route-button.primary {
   background: var(--primary-green);
   color: white;
}

.route-button.primary:hover {
   background: #27ae60;
   transform: translateY(-1px);
}

.route-button.secondary {
   background: transparent;
   color: var(--secondary-blue);
   border: 2px solid var(--secondary-blue);
}

.route-button.secondary:hover {
   background: var(--secondary-blue);
   color: white;
}

.route-button.locked {
   background: #95a5a6;
   color: white;
}

.route-button.locked:hover {
   background: #7f8c8d;
}

.button-icon {
   font-size: 1rem;
}

/* Points List */
.section-title {
   color: var(--secondary-blue);
   font-size: 1.2rem;
   font-weight: 600;
   margin-bottom: 16px;
}

.points-list {
   display: flex;
   flex-direction: column;
   gap: 12px;
}

.point-item {
   display: flex;
   align-items: center;
   gap: 12px;
   padding: 12px;
   background: var(--light-gray);
   border-radius: 12px;
   transition: transform 0.2s ease;
}

.point-item:hover {
   transform: translateX(4px);
}

.point-icon {
   width: 40px;
   height: 40px;
   border-radius: 50%;
   background: var(--primary-green);
   display: flex;
   align-items: center;
   justify-content: center;
   font-size: 1.2rem;
}

.point-info {
   flex: 1;
}

.point-info h5 {
   color: var(--secondary-blue);
   font-weight: 600;
   margin-bottom: 2px;
}

.point-type {
   font-size: 0.75rem;
   color: #666;
   font-weight: 500;
}

.point-preview {
   background: none;
   border: none;
   padding: 8px;
   border-radius: 50%;
   cursor: pointer;
   transition: background 0.2s ease;
}

.point-preview:hover {
   background: rgba(46, 204, 113, 0.1);
}

.preview-icon {
   font-size: 1rem;
}

/* Memories Content */
.memories-content {
   display: flex;
   flex-direction: column;
   gap: 20px;
}

.photo-grid {
   display: grid;
   grid-template-columns: repeat(3, 1fr);
   gap: 8px;
}

.photo-placeholder {
   aspect-ratio: 1;
   background: var(--light-gray);
   border-radius: 8px;
   display: flex;
   align-items: center;
   justify-content: center;
   font-size: 1.5rem;
}

.stats-grid {
   display: grid;
   grid-template-columns: repeat(3, 1fr);
   gap: 16px;
}

.stat-item {
   text-align: center;
}

.stat-value {
   display: block;
   font-size: 1.5rem;
   font-weight: 700;
   color: var(--primary-green);
}

.stat-label {
   font-size: 0.8rem;
   color: #666;
   font-weight: 500;
}

.empty-memories {
   text-align: center;
   padding: 40px 20px;
}

.empty-icon {
   font-size: 3rem;
   margin-bottom: 16px;
   display: block;
}

/* Views */
.routes-view,
.adventures-view,
.profile-view {
   padding: 20px 20px 80px; /* Bottom padding for navigation */
   min-height: 100vh;
   background: var(--white);
}

.view-header {
   margin-bottom: 24px;
}

.view-header h2 {
   color: var(--secondary-blue);
   font-size: 1.8rem;
   font-weight: 700;
   margin-bottom: 4px;
}

.view-header p {
   color: #666;
   font-size: 0.95rem;
}

/* Routes View */
.routes-grid {
   display: flex;
   flex-direction: column;
   gap: 16px;
}

.route-card {
   background: var(--white);
   border-radius: 16px;
   padding: 20px;
   box-shadow: var(--shadow);
   cursor: pointer;
   transition: all 0.2s ease;
   border: 2px solid transparent;
}

.route-card:hover {
   transform: translateY(-2px);
   box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
}

.route-card.locked {
   opacity: 0.7;
}

.card-header {
   display: flex;
   justify-content: space-between;
   align-items: flex-start;
   margin-bottom: 12px;
}

.card-header h3 {
   color: var(--secondary-blue);
   font-size: 1.2rem;
   font-weight: 600;
   flex: 1;
}

.lock-icon {
   font-size: 1.2rem;
   color: #95a5a6;
}

.card-description {
   color: #666;
   line-height: 1.5;
   margin-bottom: 16px;
   font-size: 0.9rem;
}

.card-meta {
   display: flex;
   gap: 12px;
   margin-bottom: 12px;
   flex-wrap: wrap;
}

.meta-item {
   font-size: 0.8rem;
   color: #666;
   font-weight: 500;
}

.meta-item.difficulty {
   color: var(--primary-green);
}

.card-progress {
   height: 4px;
   background: var(--light-gray);
   border-radius: 2px;
   overflow: hidden;
}

.progress-fill {
   height: 100%;
   background: var(--primary-green);
   transition: width 0.3s ease;
}

.unlock-hint {
   font-size: 0.8rem;
   color: #95a5a6;
   text-align: center;
   padding: 4px 0;
}

/* Adventures View */
.stats-overview {
   display: grid;
   grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
   gap: 16px;
   margin-bottom: 32px;
}

.stat-card {
   background: var(--white);
   padding: 20px;
   border-radius: 16px;
   text-align: center;
   box-shadow: var(--shadow);
   display: flex;
   flex-direction: column;
   gap: 8px;
}

.stat-card .stat-icon {
   font-size: 2rem;
}

.stat-card .stat-value {
   font-size: 1.5rem;
   font-weight: 700;
   color: var(--primary-green);
}

.stat-card .stat-label {
   font-size: 0.8rem;
   color: #666;
   font-weight: 500;
}

.achievements-section {
   margin-bottom: 32px;
}

.achievements-section h3 {
   color: var(--secondary-blue);
   font-size: 1.3rem;
   font-weight: 600;
   margin-bottom: 16px;
}

.achievements-grid {
   display: grid;
   grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
   gap: 12px;
}

.achievement-card {
   background: var(--white);
   padding: 16px;
   border-radius: 12px;
   text-align: center;
   box-shadow: var(--shadow);
   position: relative;
   transition: transform 0.2s ease;
}

.achievement-card.unlocked {
   border: 2px solid var(--primary-green);
}

.achievement-card.locked {
   opacity: 0.5;
}

.achievement-card:hover {
   transform: scale(1.02);
}

.achievement-icon {
   font-size: 2rem;
   margin-bottom: 8px;
   display: block;
}

.achievement-name {
   font-size: 0.8rem;
   font-weight: 600;
   color: var(--secondary-blue);
}

.achievement-overlay {
   position: absolute;
   top: 8px;
   right: 8px;
   font-size: 1rem;
}

.completed-routes h3 {
   color: var(--secondary-blue);
   font-size: 1.3rem;
   font-weight: 600;
   margin-bottom: 16px;
}

.completed-list {
   display: flex;
   flex-direction: column;
   gap: 12px;
}

.completed-item {
   background: var(--white);
   padding: 16px;
   border-radius: 12px;
   box-shadow: var(--shadow);
   display: flex;
   justify-content: space-between;
   align-items: center;
}

.completed-info h4 {
   color: var(--secondary-blue);
   font-weight: 600;
   margin-bottom: 4px;
}

.completed-stats {
   display: flex;
   gap: 12px;
   font-size: 0.8rem;
   color: #666;
}

.replay-button {
   background: var(--primary-green);
   border: none;
   width: 40px;
   height: 40px;
   border-radius: 50%;
   font-size: 1.2rem;
   cursor: pointer;
   transition: all 0.2s ease;
}

.replay-button:hover {
   background: #27ae60;
   transform: scale(1.1);
}

.empty-state {
   text-align: center;
   padding: 40px 20px;
}

.empty-state .empty-icon {
   font-size: 3rem;
   margin-bottom: 16px;
   display: block;
}

/* Profile View */
.profile-section {
   margin-bottom: 32px;
}

.profile-section h3 {
   color: var(--secondary-blue);
   font-size: 1.2rem;
   font-weight: 600;
   margin-bottom: 16px;
}

.setting-item {
   display: flex;
   align-items: center;
   justify-content: space-between;
   padding: 16px;
   background: var(--white);
   border-radius: 12px;
   margin-bottom: 8px;
   box-shadow: var(--shadow);
}

.setting-button {
   display: flex;
   align-items: center;
   justify-content: space-between;
   width: 100%;
   padding: 16px;
   background: var(--white);
   border: none;
   border-radius: 12px;
   margin-bottom: 8px;
   box-shadow: var(--shadow);
   cursor: pointer;
   transition: all 0.2s ease;
}

.setting-button:hover {
   transform: translateY(-1px);
   box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
}

.setting-info {
   display: flex;
   align-items: center;
   gap: 12px;
}

.setting-icon {
   font-size: 1.5rem;
}

.setting-info h4 {
   color: var(--secondary-blue);
   font-weight: 600;
   margin-bottom: 2px;
}

.setting-info p {
   color: #666;
   font-size: 0.85rem;
}

.arrow-icon {
   color: #666;
   font-size: 1.2rem;
}

/* Toggle Switch */
.toggle-switch {
   position: relative;
   display: inline-block;
   width: 50px;
   height: 24px;
}

.toggle-switch input {
   opacity: 0;
   width: 0;
   height: 0;
}

.toggle-slider {
   position: absolute;
   cursor: pointer;
   top: 0;
   left: 0;
   right: 0;
   bottom: 0;
   background-color: #ccc;
   transition: 0.3s;
   border-radius: 24px;
}

.toggle-slider:before {
   position: absolute;
   content: "";
   height: 18px;
   width: 18px;
   left: 3px;
   bottom: 3px;
   background-color: white;
   transition: 0.3s;
   border-radius: 50%;
}

input:checked + .toggle-slider {
   background-color: var(--primary-green);
}

input:checked + .toggle-slider:before {
   transform: translateX(26px);
}

/* Volume Slider */
.volume-slider {
   width: 100px;
   height: 4px;
   border-radius: 2px;
   background: var(--light-gray);
   outline: none;
   -webkit-appearance: none;
}

.volume-slider::-webkit-slider-thumb {
   -webkit-appearance: none;
   appearance: none;
   width: 16px;
   height: 16px;
   border-radius: 50%;
   background: var(--primary-green);
   cursor: pointer;
}

.volume-slider::-moz-range-thumb {
   width: 16px;
   height: 16px;
   border-radius: 50%;
   background: var(--primary-green);
   cursor: pointer;
   border: none;
}

/* Select Inputs */
.text-size-select,
.language-select {
   padding: 8px 12px;
   border: 1px solid #ddd;
   border-radius: 8px;
   background: var(--white);
   color: var(--secondary-blue);
   font-size: 0.9rem;
}

/* Code Modal */
.modal-overlay {
   position: fixed;
   top: 0;
   left: 0;
   right: 0;
   bottom: 0;
   background: rgba(0, 0, 0, 0.5);
   display: flex;
   align-items: center;
   justify-content: center;
   z-index: 1000;
   padding: 20px;
}

.code-modal {
   background: var(--white);
   border-radius: 16px;
   width: 100%;
   max-width: 400px;
   box-shadow: var(--shadow);
   animation: modalSlideIn 0.3s ease;
}

@keyframes modalSlideIn {
   from {
      opacity: 0;
      transform: translateY(-20px);
   }
   to {
      opacity: 1;
      transform: translateY(0);
   }
}

.modal-header {
   display: flex;
   justify-content: space-between;
   align-items: center;
   padding: 20px 20px 0;
}

.modal-header h3 {
   color: var(--secondary-blue);
   font-size: 1.3rem;
   font-weight: 600;
}

.modal-close {
   background: none;
   border: none;
   font-size: 1.2rem;
   color: #666;
   cursor: pointer;
   padding: 8px;
   border-radius: 50%;
   transition: background 0.2s ease;
}

.modal-close:hover {
   background: var(--light-gray);
}

.modal-content {
   padding: 20px;
   text-align: center;
}

.unlock-icon {
   font-size: 3rem;
   margin-bottom: 16px;
}

.modal-content p {
   color: #666;
   margin-bottom: 24px;
   line-height: 1.5;
}

.code-input-group {
   margin-bottom: 16px;
}

.code-input {
   width: 100%;
   padding: 12px 16px;
   border: 2px solid #ddd;
   border-radius: 8px;
   font-size: 1rem;
   text-align: center;
   text-transform: uppercase;
   letter-spacing: 2px;
   transition: border-color 0.2s ease;
}

.code-input:focus {
   outline: none;
   border-color: var(--primary-green);
}

.error-message {
   color: #e74c3c;
   font-size: 0.9rem;
   margin-bottom: 16px;
   padding: 8px;
   background: rgba(231, 76, 60, 0.1);
   border-radius: 6px;
}

.modal-actions {
   display: flex;
   gap: 12px;
   margin-bottom: 20px;
}

.modal-button {
   flex: 1;
   padding: 12px;
   border: none;
   border-radius: 8px;
   font-weight: 600;
   cursor: pointer;
   transition: all 0.2s ease;
}

.modal-button.primary {
   background: var(--primary-green);
   color: white;
}

.modal-button.primary:hover:not(:disabled) {
   background: #27ae60;
}

.modal-button.primary:disabled {
   background: #95a5a6;
   cursor: not-allowed;
}

.modal-button.secondary {
   background: transparent;
   color: var(--secondary-blue);
   border: 2px solid var(--secondary-blue);
}

.modal-button.secondary:hover {
   background: var(--secondary-blue);
   color: white;
}

.code-hints {
   border-top: 1px solid #eee;
   padding-top: 16px;
   text-align: left;
}

.hint-title {
   font-size: 0.9rem;
   font-weight: 600;
   color: var(--secondary-blue);
   margin-bottom: 8px;
}

.hint-codes {
   display: flex;
   flex-direction: column;
   gap: 4px;
}

.hint-codes code {
   background: var(--light-gray);
   padding: 4px 8px;
   border-radius: 4px;
   font-size: 0.8rem;
   color: var(--secondary-blue);
   font-family: "Courier New", monospace;
}

/* Sidebar Updates */
.sidebar {
   position: fixed;
   top: 0;
   left: -70%;
   width: 70%;
   height: 100%;
   background: var(--white);
   z-index: 999;
   transition: left 0.3s ease;
   display: flex;
   flex-direction: column;
   box-shadow: 2px 0 20px rgba(0, 0, 0, 0.1);
}

.sidebar.open {
   left: 0;
}

.sidebar-header {
   padding: 20px;
   background: var(--secondary-blue);
   color: white;
   display: flex;
   justify-content: space-between;
   align-items: center;
}

.sidebar-header h2 {
   font-size: 1.3rem;
   font-weight: 600;
}

.close-button {
   background: none;
   border: none;
   color: white;
   font-size: 1.5rem;
   cursor: pointer;
   padding: 5px;
   border-radius: 4px;
   transition: background 0.2s ease;
}

.close-button:hover {
   background: rgba(255, 255, 255, 0.1);
}

.sidebar-main {
   flex: 1;
   overflow-y: auto;
   padding: 20px;
}

.quick-routes h3 {
   color: var(--secondary-blue);
   font-size: 1.2rem;
   font-weight: 600;
   margin-bottom: 16px;
}

.quick-route-item {
   display: flex;
   align-items: center;
   justify-content: space-between;
   width: 100%;
   padding: 16px;
   background: var(--light-gray);
   border: none;
   border-radius: 12px;
   margin-bottom: 12px;
   cursor: pointer;
   transition: all 0.2s ease;
   text-align: left;
}

.quick-route-item:hover {
   background: #d5dbdb;
   transform: translateX(4px);
}

.quick-route-item.locked {
   opacity: 0.6;
}

.quick-route-info h4 {
   color: var(--secondary-blue);
   font-weight: 600;
   margin-bottom: 4px;
   font-size: 1rem;
}

.quick-route-meta {
   font-size: 0.8rem;
   color: #666;
}

.quick-route-arrow {
   color: var(--primary-green);
   font-size: 1.2rem;
   font-weight: bold;
}

/* Overlay */
.overlay {
   position: fixed;
   top: 0;
   left: 0;
   width: 100%;
   height: 100%;
   background: rgba(0, 0, 0, 0.5);
   z-index: 998;
   transition: opacity 0.3s ease;
}

/* Responsive Design */
@media (min-width: 768px) {
   .sidebar {
      width: 350px;
      left: -350px;
   }

   .routes-grid {
      grid-template-columns: repeat(2, 1fr);
      display: grid;
   }

   .stats-overview {
      grid-template-columns: repeat(3, 1fr);
   }

   .achievements-grid {
      grid-template-columns: repeat(4, 1fr);
   }

   .route-actions {
      flex-wrap: nowrap;
   }

   .route-button {
      flex: none;
      min-width: 140px;
   }
}

@media (min-width: 1024px) {
   .enhanced-route-slider {
      max-height: 60vh;
   }

   .routes-view,
   .adventures-view,
   .profile-view {
      padding: 40px;
      padding-bottom: 100px;
   }
}

/* Accessibility */
@media (prefers-reduced-motion: reduce) {
   * {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
   }
}

/* Focus styles */
button:focus,
input:focus,
select:focus {
   outline: 2px solid var(--accent-yellow);
   outline-offset: 2px;
}

/* High contrast mode support */
@media (prefers-contrast: high) {
   .map-view {
      background: #000;
   }

   .route-card,
   .stat-card,
   .achievement-card {
      border: 2px solid var(--secondary-blue);
   }
}

/* Dark mode specific styles */
.app.dark-mode .enhanced-route-slider,
.app.dark-mode .routes-view,
.app.dark-mode .adventures-view,
.app.dark-mode .profile-view,
.app.dark-mode .code-modal,
.app.dark-mode .sidebar {
   background: var(--dark-surface);
   color: var(--dark-text);
}

.app.dark-mode .route-card,
.app.dark-mode .stat-card,
.app.dark-mode .achievement-card,
.app.dark-mode .setting-item,
.app.dark-mode .setting-button,
.app.dark-mode .completed-item {
   background: var(--dark-bg);
   box-shadow: var(--shadow-dark);
}

.app.dark-mode .route-title,
.app.dark-mode .section-title,
.app.dark-mode .view-header h2,
.app.dark-mode .profile-section h3,
.app.dark-mode .card-header h3,
.app.dark-mode .setting-info h4,
.app.dark-mode .completed-info h4,
.app.dark-mode .achievement-name,
.app.dark-mode .modal-header h3 {
   color: var(--dark-text);
}

.app.dark-mode .badge.difficulty {
   background: var(--accent-yellow);
   color: var(--dark-bg);
}

.app.dark-mode .code-input {
   background: var(--dark-bg);
   border-color: #555;
   color: var(--dark-text);
}

.app.dark-mode .text-size-select,
.app.dark-mode .language-select {
   background: var(--dark-bg);
   border-color: #555;
   color: var(--dark-text);
}

/* Loading states */
.loading {
   opacity: 0.6;
   pointer-events: none;
}

.loading::after {
   content: "";
   position: absolute;
   top: 50%;
   left: 50%;
   width: 20px;
   height: 20px;
   margin: -10px 0 0 -10px;
   border: 2px solid var(--primary-green);
   border-top-color: transparent;
   border-radius: 50%;
   animation: spin 1s linear infinite;
}

@keyframes spin {
   to {
      transform: rotate(360deg);
   }
}

/* Safe area adjustments for mobile devices */
@supports (padding: max(0px)) {
   .bottom-navigation {
      padding-bottom: max(8px, env(safe-area-inset-bottom));
   }

   .enhanced-route-slider.visible {
      bottom: max(60px, calc(60px + env(safe-area-inset-bottom)));
   }
}
